<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="jakarta.faces.html"
        xmlns:f="jakarta.faces.core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:ui="jakarta.faces.facelets"
        xmlns:ues="jakarta.faces.composite/ues"
        template="../WEB-INF/templates/default.xhtml">

   <!-- Header -->
   <ui:define name="header">
      <h1>#{crud['frm.botones.cliente']}</h1>
   </ui:define>

   <!-- Tabla de registros -->
   <ui:define name="contenido-tabla">
      <h:panelGrid>
         <h:form id="frmTop">
            <p:dataTable value="#{clienteFrm.modelo}" var="r"
                         paginator="true"
                         paginatorPosition="bottom"
                         lazy="true"
                         selection="#{clienteFrm.registro}"
                         selectionMode="single"
                         rows="#{clienteFrm.registrosPorPagina}"
                         rendered="#{clienteFrm.estado=='NADA'}">

               <p:column headerText="ID">
                  <h:outputText value="#{r.id}" />
               </p:column>

               <p:column headerText="#{crud['frm.botones.nombre']}">
                  <h:outputText value="#{r.nombre}" />
               </p:column>

               <p:column headerText="DUI">
                  <h:outputText value="#{r.dui}" />
               </p:column>

               <p:column headerText="NIT">
                  <h:outputText value="#{r.nit}" />
               </p:column>

               <p:column headerText="#{crud['frm.botones.estado']}">
                  <h:outputText value="#{r.activo ? 'ACTIVO' : 'INACTIVO'}" />
               </p:column>

               <p:ajax event="rowSelect"
                       listener="#{clienteFrm.seleccionarRegistro}"
                       update=":pnlTabla :pnlDetalle"/>
            </p:dataTable>

            <ues:botones-top formulario="#{clienteFrm}" />
         </h:form>
      </h:panelGrid>
   </ui:define>

   <!-- Detalle (formulario de edición/creación) -->
   <ui:define name="contenido-detalle">
      <h:form id="frmCrear" rendered="#{clienteFrm.estado!='NADA'}">
         <!-- Growl para mostrar mensajes -->
         <p:growl id="growl" showSummary="true" showDetail="true" sticky="false" life="5000"/>

         <h:panelGrid columns="2">

            <p:outputLabel for="txtId" value="ID:"/>
            <p:inputText id="txtId" value="#{clienteFrm.registro.id}" readonly="true" disabled="true"/>

            <p:outputLabel for="txtNombre" value="#{crud['frm.botones.nombre']}:"/>
            <p:inputText id="txtNombre" value="#{clienteFrm.registro.nombre}" size="75"/>

            <p:outputLabel for="txtDui" value="DUI:"/>
            <p:inputText id="txtDui" value="#{clienteFrm.registro.dui}" size="10"/>

            <p:outputLabel for="txtNit" value="NIT:"/>
            <p:inputText id="txtNit" value="#{clienteFrm.registro.nit}" size="15"/>

            <p:outputLabel for="chkActivo" value="#{crud['frm.botones.activo']}:"/>
            <p:selectBooleanCheckbox id="chkActivo" value="#{clienteFrm.registro.activo}"/>

         </h:panelGrid>

         <h:panelGrid columns="#{clienteFrm.estado=='MODIFICAR' ? 1 : 2}">
            <p:commandButton value="#{crud['frm.botones.guardar']}"
                             actionListener="#{clienteFrm.btnGuardarHandler}"
                             rendered="#{clienteFrm.estado=='CREAR'}"
                             update=":pnlTabla :pnlDetalle :frmCrear:growl"/>

            <p:commandButton value="#{crud['frm.botones.modificar']}"
                             actionListener="#{clienteFrm.btnModificarHandler}"
                             rendered="#{clienteFrm.estado=='MODIFICAR'}"
                             update=":pnlTabla :pnlDetalle :frmCrear:growl"/>

            <p:commandButton value="#{crud['frm.botones.eliminar']}"
                             actionListener="#{clienteFrm.btnEliminarHandler}"
                             rendered="#{clienteFrm.estado=='MODIFICAR'}"
                             update=":pnlTabla :pnlDetalle :frmCrear:growl"/>


         </h:panelGrid>
      </h:form>
   </ui:define>

</ui:composition>